(function(){function q(c){var b=0;return function(){return b<c.length?{done:!1,value:c[b++]}:{done:!0}}}function v(c){var b="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return b?b.call(c):{next:q(c)}}function w(c){for(var b,e=[];!(b=c.next()).done;)e.push(b.value);return e}
var x="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,y="function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,e){c!=Array.prototype&&c!=Object.prototype&&(c[b]=e.value)};function z(c,b){if(b){var e=x;c=c.split(".");for(var g=0;g<c.length-1;g++){var k=c[g];k in e||(e[k]={});e=e[k]}c=c[c.length-1];g=e[c];b=b(g);b!=g&&null!=b&&y(e,c,{configurable:!0,writable:!0,value:b})}}
z("Promise",function(c){function b(a){this.b=0;this.g=void 0;this.a=[];var d=this.c();try{a(d.resolve,d.reject)}catch(f){d.reject(f)}}function e(){this.a=null}function g(a){return a instanceof b?a:new b(function(d){d(a)})}if(c)return c;e.prototype.b=function(a){if(null==this.a){this.a=[];var d=this;this.c(function(){d.g()})}this.a.push(a)};var k=x.setTimeout;e.prototype.c=function(a){k(a,0)};e.prototype.g=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var d=0;d<a.length;++d){var f=
a[d];a[d]=null;try{f()}catch(h){this.f(h)}}}this.a=null};e.prototype.f=function(a){this.c(function(){throw a;})};b.prototype.c=function(){function a(h){return function(m){f||(f=!0,h.call(d,m))}}var d=this,f=!1;return{resolve:a(this.u),reject:a(this.f)}};b.prototype.u=function(a){if(a===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.v(a);else{a:switch(typeof a){case "object":var d=null!=a;break a;case "function":d=!0;break a;default:d=!1}d?this.s(a):this.l(a)}};
b.prototype.s=function(a){var d=void 0;try{d=a.then}catch(f){this.f(f);return}"function"==typeof d?this.w(d,a):this.l(a)};b.prototype.f=function(a){this.m(2,a)};b.prototype.l=function(a){this.m(1,a)};b.prototype.m=function(a,d){if(0!=this.b)throw Error("Cannot settle("+a+", "+d+"): Promise already settled in state"+this.b);this.b=a;this.g=d;this.o()};b.prototype.o=function(){if(null!=this.a){for(var a=0;a<this.a.length;++a)l.b(this.a[a]);this.a=null}};var l=new e;b.prototype.v=function(a){var d=this.c();
a.h(d.resolve,d.reject)};b.prototype.w=function(a,d){var f=this.c();try{a.call(d,f.resolve,f.reject)}catch(h){f.reject(h)}};b.prototype.then=function(a,d){function f(n,p){return"function"==typeof n?function(r){try{h(n(r))}catch(t){m(t)}}:p}var h,m,u=new b(function(n,p){h=n;m=p});this.h(f(a,h),f(d,m));return u};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.h=function(a,d){function f(){switch(h.b){case 1:a(h.g);break;case 2:d(h.g);break;default:throw Error("Unexpected state: "+
h.b);}}var h=this;null==this.a?l.b(f):this.a.push(f)};b.resolve=g;b.reject=function(a){return new b(function(d,f){f(a)})};b.race=function(a){return new b(function(d,f){for(var h=v(a),m=h.next();!m.done;m=h.next())g(m.value).h(d,f)})};b.all=function(a){var d=v(a),f=d.next();return f.done?g([]):new b(function(h,m){function u(r){return function(t){n[r]=t;p--;0==p&&h(n)}}var n=[],p=0;do n.push(void 0),p++,g(f.value).h(u(n.length-1),m),f=d.next();while(!f.done)})};return b});
z("Array.prototype.find",function(c){return c?c:function(b,e){a:{var g=this;g instanceof String&&(g=String(g));for(var k=g.length,l=0;l<k;l++){var a=g[l];if(b.call(e,a,l,g)){b=a;break a}}b=void 0}return b}});function A(c,b,e,g,k){for(var l=[],a=4;a<arguments.length;++a)l[a-4]=arguments[a];this.i=c;this.j=b;this.latitude=e;this.longitude=g;this.a=l}
function B(c,b,e){function g(k){return Math.sin(k)*Math.sin(k)}e=(c.longitude-e)*Math.PI/180;c=g((c.latitude-b)*Math.PI/180/2)+Math.cos(c.latitude*Math.PI/180)*Math.cos(b*Math.PI/180)*g(e/2);return 7917.6*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function C(c){return parseInt(c.a[c.a.length-1],10)}
function D(c,b){fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv").then(function(e){return e.text()}).then(function(e){var g=[];e=e.split("\n");e.shift();for(var k=0;k<e.length;++k){for(var l=e[k],a=!1,d="",f=[],h=0;h<l.length;++h){var m=l.charAt(h);'"'==m?a=!a:","!=m||a?d+=m:(f.push(d),d="")}f.push(d);g.push(new (Function.prototype.bind.apply(A,[null].concat(f instanceof Array?f:w(v(f))))))}c(g)}).catch(function(e){alert("Failed to load COVID-19 incident reports. Perhaps try checking your internet connection?");
console.error(e);b()})}
window.calculate=function(){(new Promise(D)).then(function(c){var b=document.getElementById("latitude").value,e=document.getElementById("longitude").value;c.sort(function(k,l){return B(k,b,e)-B(l,b,e)});var g=c.reduce(function(k,l){return k+C(l)},0);c=c.find(function(k){return 0!=C(k)});document.getElementById("results").classList.add("visible");document.getElementById("locationName").innerText=""==c.i?c.j:c.i+" ("+c.j+")";document.getElementById("reports").innerText=C(c);document.getElementById("count").innerText=g})};}).call(this);
